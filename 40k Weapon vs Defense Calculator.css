:root{
  --bg:#0b0f14; --panel:#121822; --muted:#90a4b4; --fg:#e8eef7; --accent:#6ee7ff; --accent2:#a78bfa; --bad:#ff6b6b; --good:#66e28a;
}

html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--fg);font:14px/1.4 system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
h1{font-size:20px;margin:0 0 8px}
h2{font-size:16px;margin:16px 0 8px;color:var(--accent)}

@media (max-width: 800px) {
  .app{
    grid-template-columns: 1fr !important;
    gap: 0;                 /* optional */
    width: 100vw;
  }

  aside#sidebar {
    position: fixed;
    inset: 0;
    width: 100%;
    max-width: 100%;
    z-index: 1000;
    transform: translateX(-100%);
    opacity: 1;              /* ensure it doesn't fade out oddly */
    pointer-events: auto;
  }

  /* when open (NOT collapsed), slide in */
  .app:not(.sidebar-collapsed) aside#sidebar {
    transform: translateX(0);
  }

  /* when collapsed, keep it off-screen */
  .app.sidebar-collapsed aside#sidebar {
    transform: translateX(-100%);
  }
}

.app{
  display:grid;
  grid-template-columns:500px 1fr;
  gap:14px;
  min-height:100%;
  transition:grid-template-columns 180ms ease;
}

aside{
  background:var(--panel);
  padding:14px;
  box-shadow:0 0 0 1px #182333 inset;
  transition:transform 180ms ease,opacity 180ms ease;
  will-change:transform;
}

main{padding:14px}

.card{
  background:var(--panel);
  padding:12px;
  border-radius:10px;
  box-shadow:0 0 0 1px #1b2636 inset
}

.row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
label{display:flex;flex-direction:column;gap:4px;flex:1;}

input,select,textarea{
  background:#0f141c;
  color:var(--fg);
  border:1px solid #243043;
  border-radius:8px;
  padding:8px;
  outline:none;
}

input[type="number"]{
  appearance:textfield;
  padding:6px 8px;
  min-width:0;
  width:76px;
}

/* Sidebar header + collapse */
.asideHead{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:8px}
.iconBtn{padding:6px 10px;border-radius:10px;line-height:1}
.sidebarHandle{
  position:fixed;left:10px;top:10px;z-index:999;
  display:none;padding:6px 10px;border-radius:10px;line-height:1
}

.app.sidebar-collapsed{grid-template-columns:0 1fr}
.app.sidebar-collapsed aside{transform:translateX(-100%);opacity:0;pointer-events:none}
.app.sidebar-collapsed .sidebarHandle{display:inline-flex}

/* Compact numeric UI */
.smallInput{padding:6px 8px;min-width:0;width:64px}

.disabled{
  opacity:0.45;
  pointer-events:none;
  background-color:rgb(61, 61, 61);
}

.plusWrap{display:flex;align-items:center;gap:6px}
.plusWrap .plusStatic{
  color:var(--muted);
  border:1px solid #243043;
  background:#0f141c;
  border-radius:8px;
  padding:6px 8px;
  user-select:none
}

button{
  background:linear-gradient(135deg,var(--accent2),var(--accent));
  color:#001016;border:0;border-radius:10px;
  padding:8px 12px;font-weight:700;cursor:pointer
}

button.secondary{
  background:#0f141c;color:var(--fg);
  border:1px solid #2a3a4f
}

table{width:100%;border-collapse:collapse}
th,td{border-bottom:1px solid #1b2636;padding:6px 8px;text-align:left}
.muted{color:var(--muted)}

.pill{
  display:inline-block;
  padding:2px 8px;
  border:1px solid #2a3a4f;
  border-radius:999px;
  margin-right:6px;
}

.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:8px}
details summary{cursor:pointer}

.metrics{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
.metric{
  background:#0f141c;border:1px solid #223044;border-radius:10px;padding:10px
}
.metric .v{font-size:18px;font-weight:800}

.modifier{
  background:#0d1622;border:1px solid #1f3048;border-radius:6px;
  padding:2px 6px;margin-right:4px;display:inline-block
}

.footer{opacity:.7;margin-top:12px}

/* --- Keyword tag row tweaks --- */
.kwValueRow{
  display:flex;
  align-items:center;
  gap:8px;
}
.tagPill{
  margin:0 6px 6px 0;
  display:inline-flex;
  align-items:center;
  gap:6px;
}
.tagX{
  padding:2px 6px;
  border-radius:999px;
}

/* --- Breakdown chart --- */
.chartWrap{margin-top:10px}
#breakdownChart{
  width:100%;
  height:220px;
  display:block;
  background:#0f141c;
  border:1px solid #223044;
  border-radius:10px
}
.chartHint{margin-top:6px;color:var(--muted);font-size:12px}
